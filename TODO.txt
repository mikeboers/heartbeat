NEXT
----

- simplify heavily; flat Service namespace (i.e. no Component)
    - still have individual heartbeats

- pull "cron_spec" from api calls
    - allow r'^(\d+)([hmsdw])$' -> 24hr, 1hr, 30m

- worker should:
    - awake every minute and check what it is supposed to check (use cron syntax)
    - check statuses and send emails when we seem to be missing something

- login with username/password in master configfile
- sign the `curl` URLs
    - for now can just include a v=1 along with a nonce, and sign that
    - can ban nonces in the future if they are problematic


IDEAS
-----
- form for specifying service name, machine it runs on, how often it is
  expected to check in, etc.
- creates a curl command to put at the end of periodic scripts

    curl 
        -A "heartbeat/$(hostname)" \
        -F "name=mendel.mikeboers.com backup" \
        -F "job=filesystem rsync" \
        -F "period=24h" \
        -F "allow=mendel.mikeboers.com" \
        -F "nonce=0123456789abcdef" \
        -F "signature=0123456789abcdef" \
        http://heartbeat.mikeboers.com/api/beat

- return_code is special and flags that it failed if != 0
- anything extra POSTed is remembered and displayed to the user

- what fields are required:
    name
    subname (allows for several things to contribute to one "job"; optional)
    period (how often we expect to see this; in minutes)
    allow (ips or hostnames to allow from; allows pattern matching; optional)
    nonce
    signature (hmac of urlencode(sorted(data.iteritems())) with secret_key)
